<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Approval</title>
    <link rel="stylesheet" th:href="@{/css/admin/common/commonCSS.css}">
    <link rel="stylesheet" th:href="@{/css/admin/common/commonActionBarTable.css}">
    <link rel="stylesheet" th:href="@{/css/admin/approval/approval.css}">
    <script th:src="@{/js/admin/common/aside.js}"></script>
    <style>
        /* 기본적으로 모든 탭 콘텐츠를 숨깁니다. */
        .tab-pane {
            display: none;
        }

        /* active 클래스를 가진 탭 콘텐츠만 보이게 합니다. */
        .tab-pane.active {
            display: block;
        }
    </style>
</head>
<body>
<div th:replace="~{admin/common/header :: header}"></div>
<div th:replace="~{admin/common/aside :: aside}"></div>
<main>
    <div class="main-container">
        <div th:replace="~{admin/common/mainHeader :: mainHeader}"></div>
        <div id="main-content">

            <div class="tabs">
                <button class="tab active" data-target="terms-tab">약관 승인</button>
                <button class="tab" data-target="product-tab">상품 승인</button>
            </div>

            <!-- 탭 내용 -->
            <div class="tab-content">
                <div id="terms-tab" class="tab-pane active">
                    <!-- 약관 승인 리스트 (여기에 동적으로 데이터가 로드됩니다) -->
                </div>
                <div id="product-tab" class="tab-pane">
                    <!-- 상품 승인 리스트 (여기에 동적으로 데이터가 로드됩니다) -->
                </div>
            </div>
        </div>
    </div>
</main>
<div th:replace="~{admin/common/footer :: footer}"></div>
<!--
<script>
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabPanels = document.querySelectorAll('.tab-panel');

    tabButtons.forEach(btn => {
        btn.addEventListener('click', () => {

            // 버튼 active 초기화
            tabButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // 패널 초기화
            const target = btn.dataset.tab;
            tabPanels.forEach(panel => {
                panel.classList.remove('active');
                if (panel.id === target) {
                    panel.classList.add('active');
                }
            });
        });
    });

</script>
-->
<script th:inline="javascript">
    window.BASE_URL = /*[[@{/}]]*/ "/wave/";  // 반드시 "/"로 fallback
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.tab'); // 모든 탭 버튼
        const tabContent = document.querySelector('.tab-content'); // 콘텐츠 영역

        // 탭 클릭 시 이벤트 리스너 추가
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                // 기존 활성화된 탭에서 active 클래스 제거
                tabs.forEach(t => t.classList.remove('active'));
                // 클릭한 탭에 active 클래스 추가
                tab.classList.add('active');

                // 클릭된 탭의 대상 콘텐츠만 보이게 함
                const target = tab.getAttribute('data-target');
                showTabContent(target);
            });
        });

        // 첫 번째 탭을 클릭하여 초기 데이터 로드
        showTabContent('terms-tab');

        // 탭 콘텐츠를 서버에서 동적으로 로드하는 함수
        function showTabContent(tabId) {
            // 모든 탭 콘텐츠를 숨깁니다.
            const allTabPanes = document.querySelectorAll('.tab-pane');
            allTabPanes.forEach(pane => pane.classList.remove('active'));

            // 선택된 탭 콘텐츠만 보이게 합니다.
            const targetTab = document.getElementById(tabId);
            targetTab.classList.add('active');

            // 서버로 데이터를 로드합니다.
            loadTabContent(tabId);
        }

        // 서버로 탭 콘텐츠 로딩을 위한 함수
        function loadTabContent(tabId) {
            let url = '';
            if (tabId === 'terms-tab') {
                url = window.BASE_URL + 'admin/approval/terms/list'; // 약관 승인 콘텐츠
            } else if (tabId === 'product-tab') {
                url = window.BASE_URL + 'admin/approval/card/list'; // 상품 승인 콘텐츠
            }

            // AJAX 요청
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    // 해당 탭에 콘텐츠를 삽입
                    const targetTab = document.getElementById(tabId);
                    targetTab.innerHTML = data;

                    // 탭 콘텐츠를 활성화
                    const allTabPanes = document.querySelectorAll('.tab-pane');
                    allTabPanes.forEach(pane => pane.classList.remove('active'));
                    targetTab.classList.add('active');
                })
                .catch(error => {
                    console.error('Error loading tab content:', error);
                });
        }
    });

</script>
</body>
</html>