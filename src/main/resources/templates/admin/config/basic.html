<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CARD ADMIN</title>
    <link rel="stylesheet" th:href="@{/css/admin/common/commonCSS.css}">
    <link rel="stylesheet" th:href="@{/css/admin/common/commonActionBarTable.css}">
    <link rel="stylesheet" th:href="@{/css/admin/config/basic.css}">
    <script th:src="@{/js/admin/common/aside.js}"></script>
</head>
<div th:replace="~{admin/common/header :: header}"></div>
<div th:replace="~{admin/common/aside :: aside}"></div>
<body>
<main>
    <div class="main-container">
        <div th:replace="~{admin/common/mainHeader :: mainHeader}"></div>

        <div class="nav-content">
            <nav class="nav-menu">
                <ul>
                    <li style=" font-weight: 800; color: #cb2b11;">
                        <a th:href="@{/admin/config/basic}" style="color: #cb2b11; font-size: 20px;">기본설정</a>
                    </li>
                    <li><a th:href="@{/admin/config/version}">버전관리</a></li>
                    <li><a th:href="@{/admin/config/category}">화면관리</a></li>
                    <li><a th:href="@{/admin/config/banner}">배너관리</a></li>
                </ul>
            </nav>
        </div>

        <div id="main-content">
            <div class="configBasicWrap">
                <section class="form-section">
                    <!-- 1. 버전 -->
                    <div class="section-header">
                        <h3>버전 정보</h3>
                        <p class="description">현재 사이트 버전입니다.</p>
                    </div>
                    <div class="section-content">
                        <table>
                            <tr>
                                <th>사이트 버전</th>
                                <td>[[${basicConfig.siteInfo.version}]]</td>
                            </tr>
                        </table>
                    </div>
                </section>
                <!-- 2. 사이트 -->
                <section class="form-section">
                    <div class="section-header">
                        <h3>사이트</h3>
                        <p class="description">브라우저 탭, 헤더 및 푸터 노출 정보입니다.</p>
                    </div>
                    <div class="section-content">
                        <table>
                            <tr>
                                <th>제목</th>
                                <td>[[${basicConfig.siteInfo.title}]]</td>
                            </tr>
                            <tr>
                                <th>부제목</th>
                                <td>[[${basicConfig.siteInfo.subtitle}]]</td>
                            </tr>
                            <tr>
                                <th></th>
                                <td colspan="2" class="btn-td">
                                    <button type="submit" class="btn update-btn">수정</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </section>
                <!-- 3.로고 -->
                <section class="form-section">
                    <div class="section-header">
                        <h3>로고</h3>
                        <p class="description">브라우저 탭, 헤더 및 푸터 노출 로고입니다.</p>
                    </div>
                    <div class="section-content">
                        <form th:action="@{/admin/config/basic/upload}" method="post" enctype="multipart/form-data">
                            <div class="form-wrap">
                                <input type="hidden" name="siteId" th:value="${basicConfig.siteInfo.siteId}">
                                <table>
                                    <tr>
                                        <th>헤더로고</th>
                                        <td>
                                            <div class="file-upload-wrapper">
                                                <label class="custom-file-label">파일 선택</label>
                                                <span id="fileNameDisplayHeader"> 선택된 파일 없음</span>
                                                <input type="file" name="header_logo" id="inputHeader" accept="image/*"
                                                        data-file-name="fileNameDisplayHeader">
                                            </div>
                                            <!-- 기존 이미지가 있으면 표시 -->
                                            <div th:if="${basicConfig.siteInfo.headerLogo}">
                                                <p>현재 이미지 :</p>
                                                <img th:src="@{/uploads/{name}(name=${basicConfig.siteInfo.headerLogo})}"
                                                     alt="헤더로고" style="max-width: 200px;">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>푸터로고</th>
                                        <td>
                                            <div class="file-upload-wrapper">
                                                <label class="custom-file-label">파일 선택</label>
                                                <span id="fileNameDisplayFooter">선택된 파일 없음</span>
                                                <input type="file" name="footer_logo" id="inputFooter" accept="image/*"
                                                        data-file-name="fileNameDisplayFooter">

                                            </div>
                                            <div th:if="${basicConfig.siteInfo.footerLogo}">
                                                <p>현재 이미지 :</p>
                                                <img th:src="@{/uploads/{name}(name=${basicConfig.siteInfo.footerLogo})}"
                                                     alt="헤더로고" style="max-width: 200px;">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>파비콘</th>
                                        <td>
                                            <div class="file-upload-wrapper">
                                                <label class="custom-file-label">파일 선택</label>
                                                <span id="fileNameDisplayFavicon">선택된 파일 없음</span>
                                                <input type="file" name="favicon" id="inputFavicon" accept="image/*"
                                                        data-file-name="fileNameDisplayFavicon">
                                            </div>
                                            <div th:if="${basicConfig.siteInfo.favicon}">
                                                <p>현재 이미지 :</p>
                                                <img th:src="@{/uploads/{name}(name=${basicConfig.siteInfo.favicon})}"
                                                     alt="헤더로고" style="max-width: 200px;">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <td colspan="2" class="btn-td">
                                            <button type="submit" class="btn update-btn">수정</button>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </form>
                    </div>
                </section>
                <!-- 4.기업정보 -->
                <section class="form-section">
                    <div class="section-header">
                        <h3>기업정보</h3>
                        <p class="description">푸터에 노출되는 기업정보입니다.</p>
                    </div>
                    <div class="section-content">
                        <table>
                            <tr>
                                <th>상호명</th>
                                <td>[[${basicConfig.companyInfo.companyName}]]</td>
                            </tr>
                            <tr>
                                <th>대표이사</th>
                                <td>[[${basicConfig.companyInfo.ceoName}]]</td>
                            </tr>
                            <tr>
                                <th>사업자등록번호</th>
                                <td>[[${basicConfig.companyInfo.businessNumber}]]</td>
                            </tr>
                            <tr>
                                <th>통신판매업신고</th>
                                <td>[[${basicConfig.companyInfo.mailOrderNumber}]]</td>
                            </tr>
                            <tr>
                                <th>기본주소</th>
                                <td>[[${basicConfig.companyInfo.basicAddress}]]</td>
                            </tr>
                            <tr>
                                <th>상세주소</th>
                                <td>[[${basicConfig.companyInfo.detailedAddress}]]</td>
                            </tr>
                            <tr>
                                <th></th>
                                <td colspan="2" class="btn-td">
                                    <button type="submit" class="btn update-btn">수정</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </section>
                <!-- 5.고객센터 -->
                <section class="form-section">
                    <div class="section-header">
                        <h3>고객센터 정보</h3>
                        <p class="description">푸터에 노출되는 고객센터 정보입니다.</p>
                    </div>
                    <div class="section-content">
                        <table>
                            <tr>
                                <th>전화번호</th>
                                <td>[[${basicConfig.customerServiceInfo.customerPhone}]]</td>
                            </tr>
                            <tr>
                                <th>업무시간</th>
                                <td>[[${basicConfig.customerServiceInfo.customerHours}]]</td>
                            </tr>
                            <tr>
                                <th>이메일</th>
                                <td>[[${basicConfig.customerServiceInfo.customerEmail}]]</td>
                            </tr>
                            <tr>
                                <th>전자금융거래 분쟁담당</th>
                                <td>[[${basicConfig.customerServiceInfo.disputeContact}]]</td>
                            </tr>
                            <tr>
                                <th></th>
                                <td colspan="2" class="btn-td">
                                    <button type="submit" class="btn update-btn">수정</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </section>
                <!-- 6.카피라이트 -->
                <section class="form-section">
                    <div class="section-header">
                        <h3>카피라이트</h3>
                        <p class="description">푸터에 노출되는 카피라이터 정보입니다.</p>
                    </div>
                    <div class="section-content">
                        <table>
                            <tr>
                                <th>카피라이트</th>
                                <td>[[${basicConfig.siteInfo.copyright}]]</td>
                            </tr>
                            <tr>
                                <th></th>
                                <td colspan="2" class="btn-td">
                                    <button type="submit" class="btn update-btn">수정</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </section>

                <!-- 주요 액션 영역 -->
                <div class="config-action-bar ">
                    <!-- 등록버튼 -->
                    <a th:href="@{/admin}" class="btn register-btn">취소</a>
                    <button class="btn register-btn">전체 수정</button>
                </div>

            </div> <!-- configBasicWrap 끝 -->
        </div> <!-- main-content 끝 -->
    </div> <!-- main=container 끝 -->
</main>
<div th:replace="~{admin/common/footer :: footer}"></div>
<script>
    // input[type="file"]
    document.addEventListener('DOMContentLoaded', function() {
        // 모든 파일 업로드 래퍼(div.file-upload-wrapper)를 가져옵니다.
        const wrappers = document.querySelectorAll('.file-upload-wrapper');

        wrappers.forEach(wrapper => {
            // 현재 래퍼 내의 파일 입력 (<input type="file">) 요소를 찾습니다.
            const fileInput = wrapper.querySelector('input[type="file"]');

            // 파일 이름을 표시하는 <span> 요소를 찾습니다.
            const fileNameDisplay = wrapper.querySelector('span[id^="fileNameDisplay"]');

            // 레이블 또는 파일 이름 표시 <span>을 클릭 가능한 요소로 간주합니다.
            // 여기서는 wrapper 전체에 클릭 리스너를 달아도 되고, 레이블에만 달아도 됩니다.
            // 레이블을 클릭하면 실제 파일 입력이 클릭되도록 합니다.
            const customFileLabel = wrapper.querySelector('.custom-file-label');

            if (customFileLabel && fileInput) {
                customFileLabel.addEventListener('click', function() {
                    // 레이블을 클릭했을 때, 실제 파일 입력 요소를 클릭합니다.
                    fileInput.click();
                });
            }

            // --- 선택된 파일 이름 표시 기능 추가 ---
            // 파일 입력 요소에 'change' 이벤트 리스너를 추가합니다.
            if (fileInput && fileNameDisplay) {
                fileInput.addEventListener('change', function() {
                    if (this.files.length > 0) {
                        // 파일이 선택되면, 첫 번째 파일의 이름을 가져와 표시합니다.
                        fileNameDisplay.textContent = this.files[0].name;
                    } else {
                        // 파일 선택을 취소하면, '선택된 파일 없음'으로 되돌립니다.
                        fileNameDisplay.textContent = '선택된 파일 없음';
                    }
                });
            }
        });
    });
</script>
</body>
</html>