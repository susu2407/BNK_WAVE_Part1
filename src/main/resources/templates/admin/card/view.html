<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CARD ADMIN</title>
    <!-- 카드 상품 자세히보기 -->
    <link rel="stylesheet" th:href="@{/css/admin/common/commonCSS.css}">
    <link rel="stylesheet" th:href="@{/css/admin/common/commonActionBarTable.css}">
    <script th:src="@{/js/admin/common/aside.js}"></script>
    <script th:src="@{/js/admin/card/cardForm.js}"></script>
</head>
<body>
<div th:replace="~{admin/common/header :: header}"></div>
<div th:replace="~{admin/common/aside :: aside}"></div>
<main>
    <div class="main-container">
        <div th:replace="~{admin/common/mainHeader :: mainHeader}"></div>
        <div id="main-content">

            <!-- 본문 -->
            <div class="content">
                <table>
                    <form th:action="@{/admin/card/update}" method="post">
                        <tr>
                            <td>상품명</td>
                            <td><input type="text" th:value="${cardItem.card.name}"></td>
                        </tr>
                        <tr>
                            <td>영어명</td>
                            <td><input type="text" th:value="${cardItem.card.engName}"></td>
                        </tr>
                        <tr>
                            <td>카드유형</td>
                            <td>
                                <select name="type" id="type" required>
                                    <option value="신용" th:selected="${cardItem.card.type == '신용'}">신용</option>
                                    <option value="체크" th:selected="${cardItem.card.type == '체크'}">체크</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>기업카드 여부</td>
                            <td>
                                <input type="checkbox" name="isCompany" value="true" th:checked="${cardItem.card.isCompany}"> 기업
                            </td>
                        </tr>
                        <tr>
                            <td>혜택</td>
                            <td>
                                <div id="benefitList">

                                    <button type="button" class="benefit-add-btn">➕ 추가</button>

                                    <div class="benefitContainer" th:each="benefit : ${cardItem.benefitList}">
                                        <!-- 카테고리 -->
                                        <select name="category" class="category" required>
                                            <option th:each="category : ${categoryList}"
                                                    th:value="${category.name}"
                                                    th:selected="${benefit.benefitCategory == category.name}"
                                                    th:text="${category.name}">
                                            </option>
                                        </select>

                                        <!-- 혜택 타입 -->
                                        <select name="benefitType" class="benefitType" required>
                                            <option value="할인" th:selected="${benefit.benefitType == '할인'}">할인</option>
                                            <option value="캐시백" th:selected="${benefit.benefitType == '캐시백'}">캐시백</option>
                                            <option value="포인트적립" th:selected="${benefit.benefitType == '포인트적립'}">포인트적립</option>
                                        </select>

                                        <input type="number" name="value" class="value" th:value="${benefit.value}" placeholder="혜택 값">

                                        <select name="unit" class="unit" required>
                                            <option value="%" th:selected="${benefit.unit == '%'}">%</option>
                                            <option value="원" th:selected="${benefit.unit == '원'}">원</option>
                                        </select>

                                        <label>한도</label>
                                        <input type="number" name="limit" class="limit" th:value="${benefit.limit}">

                                        <label>설명</label>
                                        <input type="text" name="benefitDescription" class="benefitDescription"
                                               th:value="${benefit.benefitDescription}" required>

                                        <button type="button" class="benefit-remove-btn">➖ 삭제</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>연회비</td>
                            <td>
                                <div id="annualFeeList">

                                    <!-- 추가 버튼은 딱 1개만 -->
                                    <button type="button" class="annualFee-add-btn">➕ 추가</button>

                                    <!-- 연회비 항목 반복 -->
                                    <div class="annualFeeContainer" th:each="fee, stat : ${cardItem.annualFeeList}">
                                        <input name="annualFeeName" type="text" th:value="${fee.annualName}">
                                        <button type="button" class="annualFee-remove-btn">➖ 삭제</button>
                                    </div>

                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>상태</td>
                            <td>[[${cardItem.card.status}]]</td>
                        </tr>
                        <tr>
                            <td>등록일</td>
                            <td>[[${#temporals.format(cardItem.card.createdAt, 'yyyy-MM-dd')}]]</td>
                        </tr>
                        <tr>
                            <td>수정일</td>
                            <td>[[${#temporals.format(cardItem.card.updatedAt, 'yyyy-MM-dd')}]]</td>
                        </tr>
                        <tr>
                            <td>
                                <button type="submit" value="수정">수정</button>
                            </td>
                        </tr>
                    </form>
                </table>
            </div>

        </div>
    </div>
</main>
<div th:replace="~{admin/common/footer :: footer}"></div>
</body>
</html>