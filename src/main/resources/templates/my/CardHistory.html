<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAVE CARD</title>

    <!-- 이 페이지 전용 스타일 -->
<!--    <link rel="stylesheet" href="../../static/css/member/my/CardHistory.css">-->
    <link rel="stylesheet" th:href="@{/css/member/my/CardHistory.css}">
</head>

<body>
    <div th:replace="~{common/header :: header}"></div>

    <main class="content statement-content">

        <!-- 상단: 월 선택 + 총 사용금액 + 카드선택 -->
        <section class="statement-top">
            <div class="statement-title-wrap">
                <!-- 월 선택 영역 -->
                <div class="month-select">
                    <button type="button" class="month-select-trigger" id="btnMonthSelect">
                        <h1 class="statement-title" id="monthTitleText">
                            12월 15일 명세서 (예정)
                        </h1>
                        <span class="month-arrow-icon"></span>
                    </button>

                    <!-- 드롭다운 -->
                    <div class="month-dropdown" id="monthDropdown">
                        <button type="button" class="month-option month-option-active" data-title="12월 15일 명세서 (예정)">
                            <span class="month-year">2025</span>
                            <span class="month-label">12월 15일 (예정)</span>
                            <span class="month-check">✔</span>
                        </button>
                    </div>
                </div>

                <div class="statement-top-actions">
                    <button type="button" class="icon-btn" aria-label="엑셀 저장"><img
                            src="	https://www.hyundaicard.com/docfiles/resources/pc/images/common/icon/w32/ico_paperDown.png"></button>
                    <button type="button" class="icon-btn" aria-label="인쇄"><img
                            src="https://www.hyundaicard.com/docfiles/resources/pc/images/common/icon/w32/ico_print.png"></button>
                </div>
            </div>
            <div class="statement-summary-row">
                <!-- 왼쪽 : 기간 내 총 사용금액 -->
                <div class="summary-left">
                    <p class="summary-total-label">기간 내 총 사용 금액</p>
                    <p class="summary-total-amount">
                        <span class="amount-number">861,400</span><span class="amount-unit">원</span>
                    </p>
                    <p class="summary-period">25.11.04 ~ 25.12.03</p>
                </div>

                <!-- 오른쪽 : 카드 선택 -->
                <div class="summary-right">
                    <p class="card-select-title">카드 선택</p>

                    <details class="card-select">
                        <summary class="card-select-summary">
                            <div class="card-selected">
                                <div class="card-thumb">
                                    <img th:src="@{/images/AMEX_Platinum.png}" alt="카드 이미지" class="owned-card-thumb">
                                </div>
                                <div class="card-selected-info">
                                    <span class="card-selected-name">AMEX Platinum</span>
                                    <span class="card-selected-number">3782-******-*0005</span>
                                </div>
                            </div>
                            <span class="card-select-arrow">▼</span>
                        </summary>
                    </details>
                </div>
            </div>

            <hr class="statement-divider">
        </section>

        <!-- 하단: 이용내역 + 결제요약 정보 -->
        <section class="statement-body">

            <!-- 왼쪽: 이용내역 -->
            <section class="usage-history">
                <header class="usage-header">
                    <div class="usage-header-left">
                        <h2 class="section-title">이용내역</h2>
                        <div class="usage-sort">
                            <button type="button" class="sort-btn sort-active" data-sort="recent">최신순</button>
                            <span class="sort-divider">|</span>
                            <button type="button" class="sort-btn" data-sort="amount">고액순</button>
                        </div>
                    </div>

                    <!-- 필터 아이콘 버튼 -->
                    <button type="button" class="filter-btn" id="btnFilter" aria-label="필터 설정">
                        <span class="filter-icon"></span>
                    </button>
                </header>

                <!-- 필터 패널 -->
                <div class="usage-filter-panel" id="usageFilterPanel">
                    <!-- 이용 지역 -->
                    <div class="filter-group">
                        <h3 class="filter-title">이용 지역</h3>
                        <div class="filter-chip-row" data-select="single">
                            <button type="button" class="filter-chip filter-chip-active">전체</button>
                            <button type="button" class="filter-chip">국내</button>
                            <button type="button" class="filter-chip">해외</button>
                        </div>
                    </div>

                    <!-- 이용 구분 -->
                    <div class="filter-group">
                        <h3 class="filter-title">이용 구분</h3>
                        <div class="filter-chip-row" data-select="single">
                            <button type="button" class="filter-chip filter-chip-active">전체</button>
                            <button type="button" class="filter-chip">일시불</button>
                            <button type="button" class="filter-chip">할부</button>
                        </div>
                    </div>

                    <button type="button" class="filter-apply-btn">적용</button>
                </div>

                <!-- 이용내역 헤더 -->
                <div class="usage-list-head">
                    <span class="usage-count">총 45건</span>
                    <span class="usage-total">861,400원</span>
                </div>

                <!-- 이용내역 리스트 -->
                <ul class="usage-list">
                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">스타벅스R서면점</p>
                                <p class="usage-meta">
                                    25.11.04 · 13:35 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">6,100원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">GS25 서면새싹점</p>
                                <p class="usage-meta">
                                    25.11.04 · 19:03 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">13,400원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">카페이떼</p>
                                <p class="usage-meta">
                                    25.11.05 · 08:41 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">2,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">청호식당</p>
                                <p class="usage-meta">
                                    25.11.05 · 13:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">12,800원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">CU 부전스카이점</p>
                                <p class="usage-meta">
                                    25.11.05 · 18:30 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">3,700원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">투썸플레이스 서면점</p>
                                <p class="usage-meta">
                                    25.11.06 · 09:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">5,600원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">밀양돼지국밥</p>
                                <p class="usage-meta">
                                    25.11.06 · 13:15 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">11,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">이디야 부전역점</p>
                                <p class="usage-meta">
                                    25.11.06 · 17:45 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">3,900원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">세븐일레븐 부전역점</p>
                                <p class="usage-meta">
                                    25.11.06 · 22:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">4,500원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">한솥도시락 서면점</p>
                                <p class="usage-meta">
                                    25.11.07 · 12:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">6,200원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">컴포즈커피 서면점</p>
                                <p class="usage-meta">
                                    25.11.07 · 08:32 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">1,800원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">버거킹 서면점</p>
                                <p class="usage-meta">
                                    25.11.07 · 19:21 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">9,200원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">롯데리아 부전점</p>
                                <p class="usage-meta">
                                    25.11.08 · 12:55 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">7,800원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">파리바게뜨 부전역점</p>
                                <p class="usage-meta">
                                    25.11.08 · 08:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">5,400원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">빽다방 서면점</p>
                                <p class="usage-meta">
                                    25.11.08 · 15:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">2,100원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">맥도날드 서면점</p>
                                <p class="usage-meta">
                                    25.11.09 · 20:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">8,900원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">본죽 서면점</p>
                                <p class="usage-meta">
                                    25.11.09 · 13:05 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">10,500원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">우체국쇼핑몰</p>
                                <p class="usage-meta">
                                    25.11.10 · 10:13 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">24,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">쿠팡</p>
                                <p class="usage-meta">
                                    25.11.10 · 22:30 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">31,400원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">다이소 부전점</p>
                                <p class="usage-meta">
                                    25.11.11 · 18:14 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">6,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">올리브영 서면점</p>
                                <p class="usage-meta">
                                    25.11.11 · 20:20 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">18,900원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">교보문고 서면점</p>
                                <p class="usage-meta">
                                    25.11.12 · 14:55 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">22,300원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">무신사스토어 부산점</p>
                                <p class="usage-meta">
                                    25.11.12 · 19:30 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">46,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">홈플러스 가야점</p>
                                <p class="usage-meta">
                                    25.11.13 · 17:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">63,200원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">이마트 트레이더스</p>
                                <p class="usage-meta">
                                    25.11.14 · 15:31 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">58,500원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">넷플릭스</p>
                                <p class="usage-meta">
                                    25.11.15 · 00:05 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">17,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">왓챠</p>
                                <p class="usage-meta">
                                    25.11.15 · 00:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">7,900원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">유튜브 프리미엄</p>
                                <p class="usage-meta">
                                    25.11.15 · 00:12 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">14,900원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">서브웨이 서면점</p>
                                <p class="usage-meta">
                                    25.11.16 · 12:59 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">8,400원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">죠스떡볶이 서면점</p>
                                <p class="usage-meta">
                                    25.11.16 · 16:30 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">4,500원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">맘스터치 서면점</p>
                                <p class="usage-meta">
                                    25.11.17 · 12:20 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">7,200원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">도미노피자 서면점</p>
                                <p class="usage-meta">
                                    25.11.17 · 19:45 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">22,800원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">롯데시네마 서면</p>
                                <p class="usage-meta">
                                    25.11.18 · 20:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">24,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">CGV 서면</p>
                                <p class="usage-meta">
                                    25.11.19 · 21:00 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">28,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">네이버페이</p>
                                <p class="usage-meta">
                                    25.11.20 · 10:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">41,500원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">쿠팡이츠</p>
                                <p class="usage-meta">
                                    25.11.21 · 19:05 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">18,700원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">배달의민족</p>
                                <p class="usage-meta">
                                    25.11.22 · 19:32 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">21,300원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">GS더프레시 부전점</p>
                                <p class="usage-meta">
                                    25.11.23 · 17:15 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">29,800원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">스타필드몰 온라인</p>
                                <p class="usage-meta">
                                    25.11.24 · 22:18 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">52,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">아웃백 서면점</p>
                                <p class="usage-meta">
                                    25.11.26 · 19:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">74,300원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">ABC마트 서면점</p>
                                <p class="usage-meta">
                                    25.11.28 · 16:55 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">64,400원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">아이디어스</p>
                                <p class="usage-meta">
                                    25.11.30 · 21:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">23,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">오늘의집</p>
                                <p class="usage-meta">
                                    25.12.01 · 18:20 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">37,200원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">쿠팡</p>
                                <p class="usage-meta">
                                    25.12.03 · 22:10 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">49,000원</p>
                        </div>
                    </li>

                    <li class="usage-item">
                        <div class="usage-item-main">
                            <div class="usage-item-left">
                                <p class="usage-merchant">GS25 서면본점</p>
                                <p class="usage-meta">
                                    25.12.04 · 08:40 · 일시불
                                </p>
                            </div>
                            <p class="usage-amount">5,900원</p>
                        </div>
                    </li>
                </ul>

                <!-- 더보기 버튼 -->
                <div class="usage-more-wrap">
                    <button type="button" class="usage-more-btn" id="btnUsageMore">
                        이용내역 더보기
                    </button>
                </div>
            </section>

            <!-- 오른쪽: 결제요약 정보 -->
            <section class="payment-summary">

                <div class="payment-card">
                    <div class="payment-card-header">
                        <span class="payment-card-title">결제요약 정보</span>
                        <div class="payment-total">
                            <span class="payment-total-label">총 결제 금액</span>
                            <span class="payment-total-amount">861,400원</span>
                        </div>
                    </div>

                    <dl class="payment-info-list">
                        <div class="payment-info-row">
                            <dt>결제계좌</dt>
                            <dd>신한은행 110-***-*****0</dd>
                        </div>
                        <div class="payment-info-row">
                            <dt>대상카드</dt>
                            <dd>AMEX Platinum 0005</dd>
                        </div>
                        <div class="payment-info-row">
                            <dt>작성기준일</dt>
                            <dd>25.12.05</dd>
                        </div>
                    </dl>

                    <div class="payment-links">
                        <a href="#" class="payment-link">카드 이용 안내</a>
                        <span class="link-divider">|</span>
                        <a href="#" class="payment-link">결제 계좌 변경</a>
                        <span class="link-divider">|</span>
                        <a href="#" class="payment-link">전월 한도 확인</a>
                    </div>
                </div>
            </section>
        </section>
    </main>

    <div th:replace="~{common/footer :: footer}"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 공통 헤더 로드
            fetch('../common/header.html')
                .then(res => res.text())
                .then(html => {
                    document.getElementById('header').innerHTML = html;
                    const headerEl = document.querySelector('.header');
                    if (headerEl) {
                        window.addEventListener('scroll', () => {
                            if (window.scrollY > 10) headerEl.classList.add('scrolled');
                            else headerEl.classList.remove('scrolled');
                        });
                    }
                });

            // 공통 푸터 로드
            fetch('../common/footer.html')
                .then(res => res.text())
                .then(html => document.getElementById('footer').innerHTML = html);

            // 필터 패널 토글
            const filterBtn = document.getElementById('btnFilter');
            const filterPanel = document.getElementById('usageFilterPanel');

            if (filterBtn && filterPanel) {
                filterBtn.addEventListener('click', function (e) {
                    e.stopPropagation();
                    filterPanel.classList.toggle('open');
                });

                document.addEventListener('click', function (e) {
                    if (!filterPanel.contains(e.target) && e.target !== filterBtn) {
                        filterPanel.classList.remove('open');
                    }
                });
            }

            // 필터칩 단일 선택
            document.querySelectorAll('.filter-chip-row[data-select="single"]').forEach(function (row) {
                row.addEventListener('click', function (e) {
                    const btn = e.target.closest('.filter-chip');
                    if (!btn) return;

                    row.querySelectorAll('.filter-chip').forEach(function (chip) {
                        chip.classList.remove('filter-chip-active');
                    });
                    btn.classList.add('filter-chip-active');
                });
            });

            // 최신순 / 고액순 정렬 탭
            const sortContainer = document.querySelector('.usage-sort');
            if (sortContainer) {
                sortContainer.addEventListener('click', function (e) {
                    const btn = e.target.closest('.sort-btn');
                    if (!btn) return;

                    sortContainer.querySelectorAll('.sort-btn').forEach(b => {
                        b.classList.remove('sort-active');
                    });
                    btn.classList.add('sort-active');

                    const sortType = btn.dataset.sort;  // 'recent' or 'amount'
                    console.log('정렬 변경:', sortType);
                    // TODO: sortType에 따라 실제 정렬 로직 추가
                });
            }
            // 카드 선택 드롭다운: 옵션 클릭 시 상단 선택 영역 변경
            const cardSelect = document.querySelector('.card-select');
            if (cardSelect) {
                const selectedNameEl = cardSelect.querySelector('.card-selected-name');
                const selectedNumberEl = cardSelect.querySelector('.card-selected-number');
                const selectedThumbEl = cardSelect.querySelector('.card-selected .card-thumb');

                cardSelect.querySelectorAll('.card-option').forEach(option => {
                    option.addEventListener('click', function (e) {
                        e.preventDefault(); // 폼 전송 방지

                        const optionNameEl = option.querySelector('.card-option-name');
                        const optionNumberEl = option.querySelector('.card-option-number');
                        const optionThumbEl = option.querySelector('.card-thumb');

                        // 1) 텍스트 변경
                        selectedNameEl.textContent = optionNameEl.textContent;
                        selectedNumberEl.textContent = optionNumberEl.textContent;

                        // 2) 카드 색상 클래스 변경 (card-color-* 만 교체)
                        selectedThumbEl.classList.forEach(c => {
                            if (c.startsWith('card-color-')) {
                                selectedThumbEl.classList.remove(c);
                            }
                        });
                        optionThumbEl.classList.forEach(c => {
                            if (c.startsWith('card-color-')) {
                                selectedThumbEl.classList.add(c);
                            }
                        });

                        // 3) 드롭다운 닫기
                        cardSelect.open = false;
                    });
                });
            }

            // 월 선택 드롭다운
            const monthTrigger = document.getElementById('btnMonthSelect');
            const monthDropdown = document.getElementById('monthDropdown');
            const monthTitleText = document.getElementById('monthTitleText');

            if (monthTrigger && monthDropdown && monthTitleText) {
                // 토글 열기/닫기
                monthTrigger.addEventListener('click', function (e) {
                    e.stopPropagation();
                    const isOpen = monthDropdown.classList.toggle('open');
                    monthTrigger.classList.toggle('open', isOpen);
                });

                // 옵션 선택
                monthDropdown.querySelectorAll('.month-option').forEach(option => {
                    option.addEventListener('click', function (e) {
                        e.preventDefault();

                        // 제목 텍스트 변경
                        const title = option.dataset.title;
                        if (title) {
                            monthTitleText.textContent = title;
                        }

                        // 선택 표시 변경
                        monthDropdown.querySelectorAll('.month-option')
                            .forEach(o => o.classList.remove('month-option-active'));
                        option.classList.add('month-option-active');

                        // 닫기
                        monthDropdown.classList.remove('open');
                        monthTrigger.classList.remove('open');

                        // TODO: 여기서 선택된 달에 맞춰 실제 데이터 재조회 로직 추가
                        // ex) const selectedValue = option.dataset.value;
                    });
                });

                // 바깥 클릭 시 닫기
                document.addEventListener('click', function (e) {
                    if (!monthDropdown.contains(e.target) && e.target !== monthTrigger) {
                        monthDropdown.classList.remove('open');
                        monthTrigger.classList.remove('open');
                    }
                });
            }

            // 이용내역 10건씩 표시 + 더보기 버튼
            const usageItems = document.querySelectorAll('.usage-list .usage-item');
            const moreBtn = document.getElementById('btnUsageMore');
            const PAGE_SIZE = 10;   // 한 번에 보여줄 건수

            if (usageItems.length > 0 && moreBtn) {
                let visibleCount = Math.min(PAGE_SIZE, usageItems.length);

                // 현재 visibleCount까지만 보이게 처리
                function updateUsageVisibility() {
                    usageItems.forEach((item, index) => {
                        item.style.display = (index < visibleCount) ? 'block' : 'none';
                    });

                    // 모두 보이면 버튼 숨기기
                    if (visibleCount >= usageItems.length) {
                        moreBtn.style.display = 'none';
                    } else {
                        moreBtn.style.display = 'inline-block';
                    }
                }

                // 초기 상태 설정
                updateUsageVisibility();

                // 더보기 클릭 시 10개 추가
                moreBtn.addEventListener('click', function () {
                    visibleCount = Math.min(visibleCount + PAGE_SIZE, usageItems.length);
                    updateUsageVisibility();
                });
            } else if (moreBtn) {
                // 항목이 0개면 버튼 필요 없음
                moreBtn.style.display = 'none';
            }

            // ===== 이용내역 위치 / 지도 섹션 =====
            // 1) 이용내역 기간 텍스트를 지도 안내 문구에도 복사
            const periodTextEl = document.querySelector('.summary-period');
            const mapPeriodEl = document.querySelector('.usage-map-period');

            if (periodTextEl && mapPeriodEl) {
                mapPeriodEl.textContent = periodTextEl.textContent.trim();
            }

            // 2) 날짜 선택 드롭다운 (예시 데이터)
            const btnMapDate = document.getElementById('btnMapDate');
            const mapDateDropdown = document.getElementById('mapDateDropdown');
            const mapDateText = document.getElementById('mapDateText');
            const btnMapViewAll = document.getElementById('btnMapViewAll');

            if (btnMapDate && mapDateDropdown && mapDateText) {
                // TODO: 실제로는 서버에서 "해당 기간 내 이용 날짜 목록"을 가져와서 채워주면 됨
                const sampleDates = ['25.11.18', '25.11.17', '25.11.16'];

                sampleDates.forEach(d => {
                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'map-date-option';
                    btn.dataset.date = d;
                    btn.textContent = d;
                    mapDateDropdown.appendChild(btn);
                });

                // 드롭다운 열기/닫기
                btnMapDate.addEventListener('click', function (e) {
                    e.stopPropagation();
                    mapDateDropdown.classList.toggle('open');
                });

                // 날짜 선택
                mapDateDropdown.addEventListener('click', function (e) {
                    const option = e.target.closest('.map-date-option');
                    if (!option) return;

                    const selectedDate = option.dataset.date;
                    mapDateText.textContent = selectedDate;
                    mapDateDropdown.classList.remove('open');

                    // TODO: 여기서 selectedDate 기준으로 지도 데이터 조회 + #mapContainer 렌더링
                    console.log('지도용 선택 날짜:', selectedDate);
                });

                // 바깥 클릭 시 드롭다운 닫기
                document.addEventListener('click', function (e) {
                    if (!mapDateDropdown.contains(e.target) && e.target !== btnMapDate) {
                        mapDateDropdown.classList.remove('open');
                    }
                });
            }

            // 3) 전체 보기 - 새 탭으로 이동
            if (btnMapViewAll && mapDateText) {
                btnMapViewAll.addEventListener('click', function (e) {
                    e.preventDefault();

                    const selectedDate = mapDateText.textContent.trim();
                    if (!selectedDate || selectedDate === '날짜 선택') {
                        alert('먼저 날짜를 선택해 주세요.');
                        return;
                    }

                    // TODO: 실제 전체 지도 페이지 URL 규칙에 맞게 수정
                    const url = `/map/usage?date=${encodeURIComponent(selectedDate)}`;
                    window.open(url, '_blank');
                });
            }

        });
    </script>

</body>

</html>